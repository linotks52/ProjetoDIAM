{% extends "./base.html" %}

{% block content %}
  <h2>Task List</h2>
  <ul>
  {% if tasks %}
    {% for task in tasks %}
      <li>
      <input type="checkbox" id="{{ task.id }}" name="ids">
      <a href="{% url 'taskmanager:edit_task' task.id %}"> {{ task.title }}</a>
      </li>
    {% endfor %}
  {% else %}
        <p>Não há tarefas disponíveis.</p>
    {% endif %}
    <button id="deleteAll" type="button">Eliminar</button>
  </ul>
  <a href="{% url 'taskmanager:create_task' %}">Create Task</a>
{% endblock %}

<script>
    var myButton = document.getElementById("deleteAll");
    print(dred)
    myButton.addEventListener("click", function() {
    var selectedIds = Array.from(document.querySelectorAll('input[name="ids"]:checked'))
                         .map(function(elem) { return elem.id; });
    if (selectedIds.length > 0) {
        var url = "{% url 'taskmanager:multiple_delete' %}?ids=" + selectedIds.join(',');
        print(url)
        window.location.href = url;
    }
    });

</script>